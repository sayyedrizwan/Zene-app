<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Zene Music Player</title>
    </head>
    <body>
        <div id="player"></div>
        <script>
            var setSpeed = 1.0;
            var showCaption = true;
            var isNew = false;

            var tag = document.createElement("script");

            tag.src = "https://www.youtube.com/iframe_api";
            var firstScriptTag = document.getElementsByTagName("script")[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

            var player;
            function onYouTubeIframeAPIReady() {
              player = new YT.Player("player", {
                height: "100%",
                width: "100%",
                videoId: "<<VideoID>>",
                playerVars: { 'controls': 0 },
                events: {
                  onReady: onPlayerReady,
                  onStateChange: onPlayerStateChange,
                  onError: onPlayerError,
                },
              });
            }

            function onPlayerError(event) {
                if ([100, 101, 150].includes(event.data)) {
                    Zene.videoUnAvailable()
                }
                Zene.onError()
            }

            function onPlayerReady(event) {
              event.target.unMute();
              event.target.setVolume(100);
              event.target.setLoop(false);
              event.target.setPlaybackRate(setSpeed);

              if(!isNew) {
                 event.target.playVideo();
              }

              Zene.videoInfo(player.getVideoData().title, player.getVideoData().author, player.getVideoData().video_id);
            }

            function playingStatus() {
              Zene.videoState(player.getPlayerState(), player.getCurrentTime(), player.getDuration(), player.getPlaybackRate());
            }

            function onPlayerStateChange(event) {
              if (event.data === YT.PlayerState.ENDED) {
                Zene.videoEnded()
              }
            }

            function unMute() {
               player.unMute();
               playingStatus();
            }

            function playbackRate(v) {
               player.setPlaybackRate(v);
            }

            function seekTo(v) {
              player.seekTo(v);
              playingStatus();
            }

            function seekAhead() {
              seekTo(player.getCurrentTime() + 5);
            }

            function seekBack() {
              seekTo(player.getCurrentTime() - 5);
            }

            function playVideo() {
              player.playVideo();
            }

            function pauseVideo() {
              player.pauseVideo();
            }

            function stopVideo() {
              player.stopVideo();
            }

            function loadAVideo(id) {
              player.loadVideoById(id, 0);
            }

            function cueVideo(id) {
              player.cueVideoById(id, 0);
            }
        </script>
    </body>
</html>
