<!DOCTYPE html>
<html lang="en">
    <head>
        <style>
            html,
            body {
              margin: 0;
              padding: 0;
              pointer-events: none;
            }

            .container {
              position: fixed;
              width: 100%;
              height: 100%;
              z-index: 100;
            }

            .youtube-container {
              overflow: hidden;
              width: 100%;
              aspect-ratio: 16/9;
              pointer-events: none;

              iframe {
                width: 300%;
                height: 100%;
                margin-left: -100%;
              }
            }
        </style>
        <title>Zene Video Player</title>
    </head>
    <body>
        <div class="container">
            <div id="player"></div>
        </div>
        <script>
            var setDuration = 0;
            var setSpeed = 1.0;
            var showCaption = true;


            var tag = document.createElement("script");

            tag.src = "https://www.youtube.com/iframe_api";
            var firstScriptTag = document.getElementsByTagName("script")[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

            var player;
            function onYouTubeIframeAPIReady() {
              player = new YT.Player("player", {
                height: "100%",
                width: "100%",
                videoId: "<<VideoID>>",
                playerVars: { autoplay: 1, controls: 0, cc_load_policy: 1, disablekb: 1, fs: 0, loop: 1, modestbranding: 1, rel: 0, showinfo: 0, mute: 1, autohide: 1 },
                events: {
                  onReady: onPlayerReady,
                  onStateChange: onPlayerStateChange,
                },
              });
            }

            function onPlayerReady(event) {
              event.target.unMute();
              event.target.setVolume(100);
              event.target.setLoop(true);
              event.target.playVideo();
              event.target.seekTo(setDuration);
              event.target.setPlaybackRate(setSpeed);

              getYouTubeMetadata();
            }

            function playingStatus() {
              try {
                Zene.videoState(player.getPlayerState(), player.getCurrentTime(), player.getDuration(), player.isMuted());
              } catch (exception) {}
            }

            function onPlayerStateChange(event) {
              playingStatus();
              if (event.data === YT.PlayerState.ENDED) player.loadVideoById("<<VideoID>>");
            }

            function unMute() {
              player.unMute();
              playingStatus();
            }

            function mute() {
              player.mute();
              playingStatus();
            }

            function playbackRate(v) {
              player.setPlaybackRate(v);
            }

            function seekTo(v) {
              player.seekTo(v);
              playingStatus();
            }

            function seekAhead() {
              seekTo(player.getCurrentTime() + 10);
            }

            function seekBack() {
              seekTo(player.getCurrentTime() - 10);
            }

            function playVideo() {
              player.playVideo();
            }

            function pauseVideo() {
              player.pauseVideo();
            }

            function stopVideo() {
              player.stopVideo();
            }

            function isEnableCaption(target) {
              try {
                var tracks = target.v.captions.tracklist;
                if (tracks && tracks.length > 0) {
                  Zene.captionAvailable(true);
                } else {
                  Zene.captionAvailable(false);
                }
              } catch (exception) {
                Zene.captionAvailable(false);
              }
            }

            function enableCaption() {
              try {
                player.loadModule("captions");
                player.loadModule("cc");
              } catch (exception) {}
            }

            function disableCaption() {
              try {
                player.unloadModule("captions");
                player.unloadModule("cc");
              } catch (exception) {}
            }

            async function getYouTubeMetadata() {
              const url = `https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=<<VideoID>>&format=json`;

              try {
                const response = await fetch(url);
                if (response.ok) {
                  const data = await response.json();
                  Zene.videoInfo(data.title, data.author_name, "<<VideoID>>");
                }
              } catch (error) {
                console.error("Fetch error:", error);
              }
            }
        </script>
    </body>
</html>
